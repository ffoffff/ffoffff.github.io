<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>my note</title> <!-- 将此处改为你想要的网站标题 -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.1.0/build/pure-min.css">
    <style>
        body { padding: 20px; max-width: 800px; margin: auto; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; }
        .issue { border-bottom: 1px solid #eee; padding: 15px 0; }
        .meta { color: #666; font-size: 0.9em; }
    </style>
</head>
<body>
    <h1>My Note</h1> <!-- 将此处改为你想要的网站主标题 -->
    <p>这里是我创作和收集的所有文章(大概)。</p>

    <div id="issues">
        <p>加载中...</p>
    </div>

    <script>
        // !!! 配置区域：请修改下面两个变量为你的信息 !!!
        const owner = '{ffoffff}'; // 例如：owner = 'student-writer-2024';
        const repo = '{ffoffff.github.io}';        // 通常是：repo = 'student-writer-2024.github.io';

        // 获取Issues数据的函数
        async function fetchIssues() {
            const apiUrl = `https://api.github.com/repos/${owner}/${repo}/issues?state=open`;
            try {
                const response = await fetch(apiUrl);
                const issues = await response.json();
                displayIssues(issues);
            } catch (error) {
                document.getElementById('issues').innerHTML = '<p>加载失败，请检查配置。</p>';
                console.error('Error:', error);
            }
        }

        // 展示Issues到页面的函数
        function displayIssues(issues) {
            const issuesContainer = document.getElementById('issues');
            if (issues.length === 0) {
                issuesContainer.innerHTML = '<p>暂无作文。</p>';
                return;
            }

            issuesContainer.innerHTML = ''; // 清空加载中提示
            issues.forEach(issue => {
                // 过滤掉不是作文的Issue（比如评论、讨论等）
                if (!issue.title || issue.pull_request) return;

                const issueDiv = document.createElement('div');
                issueDiv.className = 'issue';
                issueDiv.innerHTML = `
                    <h3><a href="${issue.html_url}" target="_blank">${issue.title}</a></h3>
                    <div class="meta">
                        #${issue.number} 创建于 ${new Date(issue.created_at).toLocaleDateString('zh-CN')}
                    </div>
                    <p>${issue.body ? issue.body.substring(0, 150) + '...' : '暂无内容摘要'}</p>
                `;
                issuesContainer.appendChild(issueDiv);
            });
        }

        // 页面加载完成后执行获取操作
        document.addEventListener('DOMContentLoaded', fetchIssues);
    </script>
</body>
</html>
